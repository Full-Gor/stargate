<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHD Stargate - Interface Chevrons</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a1a;
            color: #fff;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(40, 40, 100, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(100, 40, 40, 0.3) 0%, transparent 50%);
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .title {
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
        }

        .title h1 {
            font-size: 3.5rem;
            color: #00ffff;
            margin-bottom: 10px;
            letter-spacing: 3px;
        }

        .title p {
            font-size: 1.2rem;
            color: #88aaff;
            max-width: 600px;
            margin: 0 auto;
        }

        .keyboard-container {
            background: rgba(10, 15, 30, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.3);
            border: 1px solid rgba(0, 200, 255, 0.3);
            width: 100%;
            max-width: 1000px;
            margin-bottom: 30px;
        }

        .keyboard {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .keyboard-row {
            display: contents;
        }

        .key {
            background: linear-gradient(145deg, #1a1a3a, #0a0a2a);
            border: 2px solid #3344aa;
            border-radius: 8px;
            color: #aaccff;
            font-size: 1.5rem;
            font-weight: bold;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .key img {
            width: 40px;
            height: 40px;
            filter: invert(1);
        }

        .key:hover {
            background: linear-gradient(145deg, #2a2a5a, #1a1a4a);
            border-color: #4488ff;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .key:active, .key.active {
            background: linear-gradient(145deg, #3a3a7a, #2a2a6a);
            border-color: #00ffff;
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .key:active::after, .key.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(0, 255, 255, 0.3) 0%, transparent 70%);
            animation: ripple 0.5s ease-out;
        }

        .key.special {
            background: linear-gradient(145deg, #2a1a3a, #1a0a2a);
            border-color: #aa44aa;
            color: #dd99ff;
        }

        .key.special:hover {
            background: linear-gradient(145deg, #3a2a5a, #2a1a4a);
            border-color: #cc66cc;
        }

        .key.space {
            grid-column: span 4;
            font-size: 1rem;
        }

        .key.enter {
            grid-column: span 2;
            background: linear-gradient(145deg, #1a3a1a, #0a2a0a);
            border-color: #44aa44;
            color: #99ff99;
        }

        .key.enter:hover {
            background: linear-gradient(145deg, #2a5a2a, #1a4a1a);
            border-color: #66cc66;
        }

        .stargate-display {
            background: rgba(0, 10, 30, 0.7);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            width: 100%;
            max-width: 800px;
            border: 1px solid rgba(0, 150, 255, 0.3);
            box-shadow: 0 0 20px rgba(0, 100, 255, 0.2);
        }

        .sequence-display {
            background: rgba(0, 20, 40, 0.8);
            border: 2px solid #00aaff;
            border-radius: 10px;
            padding: 20px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
            letter-spacing: 5px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .sequence-display img {
            width: 40px;
            height: 40px;
            margin: 0 5px;
            filter: invert(1);
        }

        .sequence-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(0, 150, 255, 0.1), transparent);
            animation: scan 3s linear infinite;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(145deg, #2a2a5a, #1a1a4a);
            border: 2px solid #4488ff;
            border-radius: 8px;
            color: #aaccff;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .control-btn:hover {
            background: linear-gradient(145deg, #3a3a7a, #2a2a6a);
            border-color: #00ffff;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .control-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .instructions {
            margin-top: 30px;
            text-align: center;
            color: #88aaff;
            max-width: 600px;
            line-height: 1.6;
        }

        .stargate-glow {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100vmax;
            height: 100vmax;
            background: radial-gradient(circle, rgba(0, 100, 255, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }

        @keyframes ripple {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        @keyframes scan {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 10px rgba(0, 150, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(0, 200, 255, 0.8);
            }
        }

        /* Animation pour les touches spéciales */
        .key.space:active, .key.enter:active {
            animation: pulse 0.3s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .keyboard {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .key {
                height: 60px;
            }
            
            .key img {
                width: 30px;
                height: 30px;
            }
            
            .title h1 {
                font-size: 2.5rem;
            }
            
            .sequence-display {
                font-size: 1.5rem;
            }
            
            .sequence-display img {
                width: 30px;
                height: 30px;
            }
        }

        @media (max-width: 480px) {
            .keyboard {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .key {
                height: 50px;
            }
            
            .key img {
                width: 25px;
                height: 25px;
            }
            
            .title h1 {
                font-size: 2rem;
            }
            
            .sequence-display {
                font-size: 1.2rem;
            }
            
            .sequence-display img {
                width: 25px;
                height: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="stargate-glow"></div>
    
    <div class="container">
        <div class="title">
            <h1>DHD STARGATE</h1>
            <p>Interface de composition avec sons authentiques des chevrons</p>
        </div>
        
        <div class="keyboard-container">
            <div class="keyboard">
                <!-- Première rangée - Symboles 1-10 -->
                <div class="keyboard-row">
                    <div class="key" data-key="1"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/001.svg"></div>
                    <div class="key" data-key="2"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/002.svg"></div>
                    <div class="key" data-key="3"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/003.svg"></div>
                    <div class="key" data-key="4"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/004.svg"></div>
                    <div class="key" data-key="5"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/005.svg"></div>
                    <div class="key" data-key="6"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/006.svg"></div>
                    <div class="key" data-key="7"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/007.svg"></div>
                    <div class="key" data-key="8"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/008.svg"></div>
                    <div class="key" data-key="9"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/009.svg"></div>
                    <div class="key" data-key="10"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/010.svg"></div>
                </div>
                
                <!-- Deuxième rangée - Symboles 11-20 -->
                <div class="keyboard-row">
                    <div class="key" data-key="11"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/011.svg"></div>
                    <div class="key" data-key="12"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/012.svg"></div>
                    <div class="key" data-key="13"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/013.svg"></div>
                    <div class="key" data-key="14"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/014.svg"></div>
                    <div class="key" data-key="15"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/015.svg"></div>
                    <div class="key" data-key="16"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/016.svg"></div>
                    <div class="key" data-key="17"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/017.svg"></div>
                    <div class="key" data-key="18"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/018.svg"></div>
                    <div class="key" data-key="19"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/019.svg"></div>
                    <div class="key" data-key="20"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/020.svg"></div>
                </div>
                
                <!-- Troisième rangée - Symboles 21-30 -->
                <div class="keyboard-row">
                    <div class="key" data-key="21"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/021.svg"></div>
                    <div class="key" data-key="22"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/022.svg"></div>
                    <div class="key" data-key="23"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/023.svg"></div>
                    <div class="key" data-key="24"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/024.svg"></div>
                    <div class="key" data-key="25"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/025.svg"></div>
                    <div class="key" data-key="26"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/026.svg"></div>
                    <div class="key" data-key="27"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/027.svg"></div>
                    <div class="key" data-key="28"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/028.svg"></div>
                    <div class="key" data-key="29"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/029.svg"></div>
                    <div class="key special" data-key="DEL">DEL</div>
                </div>
                
                <!-- Quatrième rangée - Symboles 31-39 + ENTER -->
                <div class="keyboard-row">
                    <div class="key" data-key="30"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/030.svg"></div>
                    <div class="key" data-key="31"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/031.svg"></div>
                    <div class="key" data-key="32"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/032.svg"></div>
                    <div class="key" data-key="33"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/033.svg"></div>
                    <div class="key" data-key="34"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/034.svg"></div>
                    <div class="key" data-key="35"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/035.svg"></div>
                    <div class="key" data-key="36"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/036.svg"></div>
                    <div class="key" data-key="37"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/037.svg"></div>
                    <div class="key" data-key="38"><img src="https://manzdev.github.io/cursos-assets/css3/svg/chevrons/038.svg"></div>
                    <div class="key enter" data-key="ENTER">ENTRÉE</div>
                </div>
            </div>
        </div>
        
        <div class="stargate-display">
            <div class="sequence-display" id="sequenceDisplay">
                COMPOSEZ UNE SÉQUENCE...
            </div>
            
            <div class="controls">
                <button class="control-btn" id="clearBtn">EFFACER</button>
                <button class="control-btn" id="activateBtn">ACTIVER LA PORTE</button>
                <button class="control-btn" id="randomBtn">SÉQUENCE ALÉATOIRE</button>
            </div>
        </div>
        
        <div class="instructions">
            <p>Cliquez sur les touches ou utilisez votre clavier physique. Chaque touche déclenche le son authentique d'un chevron Stargate.</p>
            <p>Composez une séquence de 7 symboles pour activer la porte des étoiles.</p>
        </div>
    </div>

    <!-- Canvas WebGL pour fond orange circulaire -->
    <canvas id="glcanvas" style="position: fixed; top: 0; left: 0; z-index: -2; width: 100vw; height: 100vh;"></canvas>

    <script>
        // Système audio Stargate
        class StargateAudio {
            constructor() {
                this.sounds = {};
                this.initSounds();
            }
            
            initSounds() {
                const path = 'https://manzdev.github.io/cursos-assets/css3/audio/';
                
                this.sounds.chevron = {
                    audio: [
                        new Audio(path + 'chev_usual_1.mp3'),
                        new Audio(path + 'chev_usual_2.mp3'),
                        new Audio(path + 'chev_usual_3.mp3'),
                        new Audio(path + 'chev_usual_4.mp3'),
                        new Audio(path + 'chev_usual_5.mp3'),
                        new Audio(path + 'chev_usual_6.mp3'),
                        new Audio(path + 'chev_usual_7.mp3')
                    ],
                    play: function() {
                        const randomIndex = Math.floor(Math.random() * this.audio.length);
                        this.audio[randomIndex].currentTime = 0;
                        this.audio[randomIndex].play().catch(e => console.log("Audio play prevented:", e));
                    }
                };
                
                this.sounds.gateRoll = new Audio(path + 'roll.mp3');
                this.sounds.gateSpin = new Audio(path + 'spin.mp3');
                this.sounds.fail = new Audio(path + 'fail.mp3');
                this.sounds.gateOpen = new Audio(path + 'eh_usual_open.mp3');
                this.sounds.gateClose = new Audio(path + 'eh_usual_close.mp3');
                this.sounds.wormHole = new Audio(path + 'wormhole.mp3');
                
                this.sounds.gateSpin.loop = true;
                this.sounds.wormHole.loop = true;
            }
            
            playChevronSound() {
                this.sounds.chevron.play();
            }
            
            playGateActivation() {
                this.sounds.gateOpen.play();
                setTimeout(() => {
                    this.sounds.wormHole.play();
                }, 1000);
            }
            
            playGateFail() {
                this.sounds.fail.play();
            }
        }

        // Interface DHD Stargate
        class StargateDHD {
            constructor() {
                this.sequence = [];
                this.maxSequenceLength = 7;
                this.audioSystem = new StargateAudio();
                this.sequenceDisplay = document.getElementById('sequenceDisplay');
                this.initKeyboard();
                this.initControls();
                this.initWebGL();
            }
            
            initKeyboard() {
                document.querySelectorAll('.key').forEach(key => {
                    key.addEventListener('click', () => {
                        const keyValue = key.getAttribute('data-key');
                        this.handleKeyPress(keyValue);
                    });
                });
                
                // Pas de clavier physique pour les symboles, car pas de mapping direct
            }
            
            initControls() {
                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.clearSequence();
                });
                
                document.getElementById('activateBtn').addEventListener('click', () => {
                    this.activateGate();
                });
                
                document.getElementById('randomBtn').addEventListener('click', () => {
                    this.generateRandomSequence();
                });
            }
            
            handleKeyPress(key) {
                this.audioSystem.playChevronSound();
                
                switch(key) {
                    case 'DEL':
                        if (this.sequence.length > 0) {
                            this.sequence.pop();
                        }
                        break;
                    case 'ENTER':
                        this.activateGate();
                        break;
                    default:
                        if (this.sequence.length < this.maxSequenceLength && !isNaN(parseInt(key))) {
                            this.sequence.push(parseInt(key));
                        }
                        break;
                }
                
                this.updateDisplay();
            }
            
            updateDisplay() {
                this.sequenceDisplay.innerHTML = '';
                if (this.sequence.length === 0) {
                    this.sequenceDisplay.textContent = 'COMPOSEZ UNE SÉQUENCE...';
                    this.sequenceDisplay.style.color = '#00ffff';
                } else {
                    this.sequence.forEach(symbol => {
                        const pad = ('00' + symbol).slice(-3);
                        const img = document.createElement('img');
                        img.src = `https://manzdev.github.io/cursos-assets/css3/svg/chevrons/${pad}.svg`;
                        this.sequenceDisplay.appendChild(img);
                    });
                    
                    if (this.sequence.length === this.maxSequenceLength) {
                        this.sequenceDisplay.style.color = '#00ff00';
                        this.sequenceDisplay.style.textShadow = '0 0 10px #00ff00';
                    } else {
                        this.sequenceDisplay.style.color = '#00ffff';
                        this.sequenceDisplay.style.textShadow = '0 0 10px #00ffff';
                    }
                }
            }
            
            clearSequence() {
                this.sequence = [];
                this.updateDisplay();
            }
            
            activateGate() {
                if (this.sequence.length === this.maxSequenceLength) {
                    this.sequenceDisplay.innerHTML = 'PORTE ACTIVÉE!';
                    this.sequenceDisplay.style.color = '#00ff00';
                    this.sequenceDisplay.style.textShadow = '0 0 15px #00ff00';
                    
                    this.audioSystem.playGateActivation();
                    
                    setTimeout(() => {
                        this.clearSequence();
                    }, 5000);
                } else {
                    this.sequenceDisplay.innerHTML = 'SÉQUENCE INCOMPLÈTE!';
                    this.sequenceDisplay.style.color = '#ff0000';
                    this.sequenceDisplay.style.textShadow = '0 0 10px #ff0000';
                    
                    this.audioSystem.playGateFail();
                    
                    setTimeout(() => {
                        this.updateDisplay();
                    }, 2000);
                }
            }
            
            generateRandomSequence() {
                this.clearSequence();
                
                for (let i = 0; i < this.maxSequenceLength; i++) {
                    const randomSymbol = Math.floor(Math.random() * 39) + 1;
                    this.sequence.push(randomSymbol);
                    
                    setTimeout(() => {
                        this.audioSystem.playChevronSound();
                    }, i * 300);
                }
                
                this.updateDisplay();
            }

            initWebGL() {
                const canvas = document.getElementById('glcanvas');
                const gl = canvas.getContext('webgl');
                if (!gl) {
                    console.log('WebGL non supporté');
                    return;
                }

                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                const vsSource = `
                    attribute vec2 aPosition;
                    void main() {
                        gl_Position = vec4(aPosition, 0.0, 1.0);
                    }
                `;

                const fsSource = `
                    void main() {
                        gl_FragColor = vec4(1.0, 0.5, 0.0, 0.2); // Orange transparent
                    }
                `;

                const vertexShader = gl.createShader(gl.VERTEX_SHADER);
                gl.shaderSource(vertexShader, vsSource);
                gl.compileShader(vertexShader);

                const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
                gl.shaderSource(fragmentShader, fsSource);
                gl.compileShader(fragmentShader);

                const program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                gl.useProgram(program);

                const segments = 100;
                const vertices = new Float32Array((segments + 2) * 2);
                vertices[0] = 0;
                vertices[1] = 0;
                for (let i = 0; i <= segments; i++) {
                    const angle = (i / segments) * Math.PI * 2;
                    vertices[2 + i * 2] = Math.cos(angle);
                    vertices[3 + i * 2] = Math.sin(angle);
                }

                const buffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
                gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

                const position = gl.getAttribLocation(program, 'aPosition');
                gl.enableVertexAttribArray(position);
                gl.vertexAttribPointer(position, 2, gl.FLOAT, false, 0, 0);

                gl.clearColor(0, 0, 0, 0);
                gl.clear(gl.COLOR_BUFFER_BIT);
                gl.drawArrays(gl.TRIANGLE_FAN, 0, segments + 2);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const stargateDHD = new StargateDHD();
            console.log('DHD Stargate initialisé');
        });
    </script>
</body>
</html>
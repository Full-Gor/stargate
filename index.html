<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clavier Stargate - Interface Chevrons</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a1a;
            color: #fff;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(40, 40, 100, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(100, 40, 40, 0.3) 0%, transparent 50%);
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .title {
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
        }

        .title h1 {
            font-size: 3.5rem;
            color: #00ffff;
            margin-bottom: 10px;
            letter-spacing: 3px;
        }

        .title p {
            font-size: 1.2rem;
            color: #88aaff;
            max-width: 600px;
            margin: 0 auto;
        }

        .keyboard-container {
            background: rgba(10, 15, 30, 0.8);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.3);
            border: 1px solid rgba(0, 200, 255, 0.3);
            width: 100%;
            max-width: 1000px;
            margin-bottom: 30px;
        }

        .keyboard {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .keyboard-row {
            display: contents;
        }

        .key {
            background: linear-gradient(145deg, #1a1a3a, #0a0a2a);
            border: 2px solid #3344aa;
            border-radius: 8px;
            color: #aaccff;
            font-size: 1.5rem;
            font-weight: bold;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .key:hover {
            background: linear-gradient(145deg, #2a2a5a, #1a1a4a);
            border-color: #4488ff;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .key:active, .key.active {
            background: linear-gradient(145deg, #3a3a7a, #2a2a6a);
            border-color: #00ffff;
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .key:active::after, .key.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(0, 255, 255, 0.3) 0%, transparent 70%);
            animation: ripple 0.5s ease-out;
        }

        .key.special {
            background: linear-gradient(145deg, #2a1a3a, #1a0a2a);
            border-color: #aa44aa;
            color: #dd99ff;
        }

        .key.special:hover {
            background: linear-gradient(145deg, #3a2a5a, #2a1a4a);
            border-color: #cc66cc;
        }

        .key.space {
            grid-column: span 4;
            font-size: 1rem;
        }

        .key.enter {
            grid-column: span 2;
            background: linear-gradient(145deg, #1a3a1a, #0a2a0a);
            border-color: #44aa44;
            color: #99ff99;
        }

        .key.enter:hover {
            background: linear-gradient(145deg, #2a5a2a, #1a4a1a);
            border-color: #66cc66;
        }

        .stargate-display {
            background: rgba(0, 10, 30, 0.7);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            width: 100%;
            max-width: 800px;
            border: 1px solid rgba(0, 150, 255, 0.3);
            box-shadow: 0 0 20px rgba(0, 100, 255, 0.2);
        }

        .sequence-display {
            background: rgba(0, 20, 40, 0.8);
            border: 2px solid #00aaff;
            border-radius: 10px;
            padding: 20px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
            letter-spacing: 5px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .sequence-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(0, 150, 255, 0.1), transparent);
            animation: scan 3s linear infinite;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(145deg, #2a2a5a, #1a1a4a);
            border: 2px solid #4488ff;
            border-radius: 8px;
            color: #aaccff;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .control-btn:hover {
            background: linear-gradient(145deg, #3a3a7a, #2a2a6a);
            border-color: #00ffff;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .control-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .instructions {
            margin-top: 30px;
            text-align: center;
            color: #88aaff;
            max-width: 600px;
            line-height: 1.6;
        }

        .stargate-glow {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100vmax;
            height: 100vmax;
            background: radial-gradient(circle, rgba(0, 100, 255, 0.1) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }

        @keyframes ripple {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }

        @keyframes scan {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 10px rgba(0, 150, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(0, 200, 255, 0.8);
            }
        }

        /* Animation pour les touches spéciales */
        .key.space:active, .key.enter:active {
            animation: pulse 0.3s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .keyboard {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .key {
                height: 60px;
                font-size: 1.2rem;
            }
            
            .title h1 {
                font-size: 2.5rem;
            }
            
            .sequence-display {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .keyboard {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .key {
                height: 50px;
                font-size: 1rem;
            }
            
            .title h1 {
                font-size: 2rem;
            }
            
            .sequence-display {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="stargate-glow"></div>
    
    <div class="container">
        <div class="title">
            <h1>CLAVIER STARGATE</h1>
            <p>Interface de composition avec sons authentiques des chevrons</p>
        </div>
        
        <div class="keyboard-container">
            <div class="keyboard">
                <!-- Première rangée -->
                <div class="keyboard-row">
                    <div class="key" data-key="1">1</div>
                    <div class="key" data-key="2">2</div>
                    <div class="key" data-key="3">3</div>
                    <div class="key" data-key="4">4</div>
                    <div class="key" data-key="5">5</div>
                    <div class="key" data-key="6">6</div>
                    <div class="key" data-key="7">7</div>
                    <div class="key" data-key="8">8</div>
                    <div class="key" data-key="9">9</div>
                    <div class="key" data-key="0">0</div>
                </div>
                
                <!-- Deuxième rangée -->
                <div class="keyboard-row">
                    <div class="key" data-key="Q">Q</div>
                    <div class="key" data-key="W">W</div>
                    <div class="key" data-key="E">E</div>
                    <div class="key" data-key="R">R</div>
                    <div class="key" data-key="T">T</div>
                    <div class="key" data-key="Y">Y</div>
                    <div class="key" data-key="U">U</div>
                    <div class="key" data-key="I">I</div>
                    <div class="key" data-key="O">O</div>
                    <div class="key" data-key="P">P</div>
                </div>
                
                <!-- Troisième rangée -->
                <div class="keyboard-row">
                    <div class="key" data-key="A">A</div>
                    <div class="key" data-key="S">S</div>
                    <div class="key" data-key="D">D</div>
                    <div class="key" data-key="F">F</div>
                    <div class="key" data-key="G">G</div>
                    <div class="key" data-key="H">H</div>
                    <div class="key" data-key="J">J</div>
                    <div class="key" data-key="K">K</div>
                    <div class="key" data-key="L">L</div>
                    <div class="key special" data-key="DEL">DEL</div>
                </div>
                
                <!-- Quatrième rangée -->
                <div class="keyboard-row">
                    <div class="key" data-key="Z">Z</div>
                    <div class="key" data-key="X">X</div>
                    <div class="key" data-key="C">C</div>
                    <div class="key" data-key="V">V</div>
                    <div class="key" data-key="B">B</div>
                    <div class="key" data-key="N">N</div>
                    <div class="key" data-key="M">M</div>
                    <div class="key space" data-key="SPACE">ESPACE</div>
                    <div class="key enter" data-key="ENTER">ENTRÉE</div>
                </div>
            </div>
        </div>
        
        <div class="stargate-display">
            <div class="sequence-display" id="sequenceDisplay">
                COMPOSEZ UNE SÉQUENCE...
            </div>
            
            <div class="controls">
                <button class="control-btn" id="clearBtn">EFFACER</button>
                <button class="control-btn" id="activateBtn">ACTIVER LA PORTE</button>
                <button class="control-btn" id="randomBtn">SÉQUENCE ALÉATOIRE</button>
            </div>
        </div>
        
        <div class="instructions">
            <p>Cliquez sur les touches ou utilisez votre clavier physique. Chaque touche déclenche le son authentique d'un chevron Stargate.</p>
            <p>Composez une séquence de 7 symboles pour activer la porte des étoiles.</p>
        </div>
    </div>

    <script>
        // Système audio Stargate
        class StargateAudio {
            constructor() {
                this.sounds = {};
                this.initSounds();
            }
            
            initSounds() {
                // Sons des chevrons (utilisant les sons originaux)
                const path = 'https://manzdev.github.io/cursos-assets/css3/audio/';
                
                this.sounds.chevron = {
                    audio: [
                        new Audio(path + 'chev_usual_1.mp3'),
                        new Audio(path + 'chev_usual_2.mp3'),
                        new Audio(path + 'chev_usual_3.mp3'),
                        new Audio(path + 'chev_usual_4.mp3'),
                        new Audio(path + 'chev_usual_5.mp3'),
                        new Audio(path + 'chev_usual_6.mp3'),
                        new Audio(path + 'chev_usual_7.mp3')
                    ],
                    play: function() {
                        const randomIndex = Math.floor(Math.random() * this.audio.length);
                        this.audio[randomIndex].currentTime = 0;
                        this.audio[randomIndex].play().catch(e => console.log("Audio play prevented:", e));
                    }
                };
                
                // Autres sons Stargate
                this.sounds.gateRoll = new Audio(path + 'roll.mp3');
                this.sounds.gateSpin = new Audio(path + 'spin.mp3');
                this.sounds.fail = new Audio(path + 'fail.mp3');
                this.sounds.gateOpen = new Audio(path + 'eh_usual_open.mp3');
                this.sounds.gateClose = new Audio(path + 'eh_usual_close.mp3');
                this.sounds.wormHole = new Audio(path + 'wormhole.mp3');
                
                // Configuration des sons en boucle
                this.sounds.gateSpin.loop = true;
                this.sounds.wormHole.loop = true;
            }
            
            playChevronSound() {
                this.sounds.chevron.play();
            }
            
            playGateActivation() {
                this.sounds.gateOpen.play();
                setTimeout(() => {
                    this.sounds.wormHole.play();
                }, 1000);
            }
            
            playGateFail() {
                this.sounds.fail.play();
            }
        }

        // Interface Clavier Stargate
        class StargateKeyboard {
            constructor() {
                this.sequence = [];
                this.maxSequenceLength = 7;
                this.audioSystem = new StargateAudio();
                this.sequenceDisplay = document.getElementById('sequenceDisplay');
                this.initKeyboard();
                this.initControls();
            }
            
            initKeyboard() {
                // Écouteurs pour les touches du clavier virtuel
                document.querySelectorAll('.key').forEach(key => {
                    key.addEventListener('click', () => {
                        const keyValue = key.getAttribute('data-key');
                        this.handleKeyPress(keyValue);
                    });
                });
                
                // Écouteur pour le clavier physique
                document.addEventListener('keydown', (event) => {
                    // Empêcher le comportement par défaut pour les touches que nous gérons
                    if (event.key.length === 1 || 
                        event.key === 'Enter' || 
                        event.key === 'Backspace' || 
                        event.key === ' ') {
                        event.preventDefault();
                        
                        let keyValue = event.key.toUpperCase();
                        if (event.key === 'Enter') keyValue = 'ENTER';
                        if (event.key === 'Backspace') keyValue = 'DEL';
                        if (event.key === ' ') keyValue = 'SPACE';
                        
                        this.handleKeyPress(keyValue);
                        
                        // Animation visuelle de la touche
                        const keyElement = document.querySelector(`.key[data-key="${keyValue}"]`);
                        if (keyElement) {
                            keyElement.classList.add('active');
                            setTimeout(() => {
                                keyElement.classList.remove('active');
                            }, 200);
                        }
                    }
                });
            }
            
            initControls() {
                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.clearSequence();
                });
                
                document.getElementById('activateBtn').addEventListener('click', () => {
                    this.activateGate();
                });
                
                document.getElementById('randomBtn').addEventListener('click', () => {
                    this.generateRandomSequence();
                });
            }
            
            handleKeyPress(key) {
                // Jouer le son du chevron
                this.audioSystem.playChevronSound();
                
                // Traiter la touche en fonction de sa valeur
                switch(key) {
                    case 'DEL':
                        if (this.sequence.length > 0) {
                            this.sequence.pop();
                        }
                        break;
                    case 'SPACE':
                        if (this.sequence.length < this.maxSequenceLength) {
                            this.sequence.push(' ');
                        }
                        break;
                    case 'ENTER':
                        this.activateGate();
                        break;
                    default:
                        if (this.sequence.length < this.maxSequenceLength && key.length === 1) {
                            this.sequence.push(key);
                        }
                        break;
                }
                
                this.updateDisplay();
            }
            
            updateDisplay() {
                if (this.sequence.length === 0) {
                    this.sequenceDisplay.textContent = 'COMPOSEZ UNE SÉQUENCE...';
                    this.sequenceDisplay.style.color = '#00ffff';
                } else {
                    this.sequenceDisplay.textContent = this.sequence.join('');
                    
                    // Changer la couleur en fonction de la longueur de la séquence
                    if (this.sequence.length === this.maxSequenceLength) {
                        this.sequenceDisplay.style.color = '#00ff00';
                        this.sequenceDisplay.style.textShadow = '0 0 10px #00ff00';
                    } else {
                        this.sequenceDisplay.style.color = '#00ffff';
                        this.sequenceDisplay.style.textShadow = '0 0 10px #00ffff';
                    }
                }
            }
            
            clearSequence() {
                this.sequence = [];
                this.updateDisplay();
            }
            
            activateGate() {
                if (this.sequence.length === this.maxSequenceLength) {
                    // Séquence complète - activation de la porte
                    this.sequenceDisplay.textContent = 'PORTE ACTIVÉE!';
                    this.sequenceDisplay.style.color = '#00ff00';
                    this.sequenceDisplay.style.textShadow = '0 0 15px #00ff00';
                    
                    // Jouer le son d'activation
                    this.audioSystem.playGateActivation();
                    
                    // Réinitialiser après un délai
                    setTimeout(() => {
                        this.clearSequence();
                    }, 5000);
                } else {
                    // Séquence incomplète - échec
                    this.sequenceDisplay.textContent = 'SÉQUENCE INCOMPLÈTE!';
                    this.sequenceDisplay.style.color = '#ff0000';
                    this.sequenceDisplay.style.textShadow = '0 0 10px #ff0000';
                    
                    // Jouer le son d'échec
                    this.audioSystem.playGateFail();
                    
                    // Réinitialiser après un délai
                    setTimeout(() => {
                        this.updateDisplay();
                    }, 2000);
                }
            }
            
            generateRandomSequence() {
                this.clearSequence();
                const symbols = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                
                for (let i = 0; i < this.maxSequenceLength; i++) {
                    const randomIndex = Math.floor(Math.random() * symbols.length);
                    this.sequence.push(symbols[randomIndex]);
                    
                    // Jouer le son du chevron avec un délai pour un effet réaliste
                    setTimeout(() => {
                        this.audioSystem.playChevronSound();
                    }, i * 300);
                }
                
                this.updateDisplay();
            }
        }

        // Initialisation quand la page est chargée
        document.addEventListener('DOMContentLoaded', () => {
            const stargateKeyboard = new StargateKeyboard();
            console.log('Clavier Stargate initialisé');
        });
    </script>
</body>
</html>